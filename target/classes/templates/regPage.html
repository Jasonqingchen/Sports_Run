<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head xmlns:th="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>ä¿¡æ¯æ³¨å†Œ</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="renderer" content="webkit">
    <!-- å¼•å…¥æ ·å¼ -->
    <!--<link rel="stylesheet" href="/vue/element-ui.min.css">-->
    <link rel="stylesheet" th:href="@{https://unpkg.com/element-ui/lib/theme-chalk/index.css}">
</head>
<style type="text/css">
    html,body{height:100%;}
    body,*{margin:0;padding:0;text-decoration:none; border:0;list-style-type: none;}
    body{ margin:0px;font-family: "å¾®è½¯é›…é»‘","å®‹ä½“",Arial;background-color:#ffffff;line-height:1.8;font-size:14px;}
    .wrappers{background-color: #f5f7fa;width:100%; min-height:100%; padding:0px 0px 0px 0px;margin:0px auto;text-align:center;position: relative;overflow:hidden;}
    @media screen and (min-width: 1200px) {
        .wrappers{max-width:640px; }
    }
        .bgimg {
        background:url("/imgs/lghead.jpg");
        position: relative;
        margin:0px auto;
        width: 100%;
        height: 120px;
  }
</style>
<body class="">
<!--htmlä»£ç  -->
<div id="app" style="text-align: center;">
    <div class="wrappers">
        <el-row>
<!--            <el-col :span="24"><div class="bg-purple-dark" style="height: 50px; color: #FFFFFF; text-align: center; font-size: 25px;"><strong>æ³¨å†Œ</strong></div></el-col>-->
                        <el-col :span="24"><div class="bgimg"></div></el-col>

        </el-row><br>
        <div style="text-align: center;">
            <el-form ref="form" :model="form" status-icon :rules="rules" label-width="80px" style="text-align: left;">
                <el-form-item label="å§“å" prop="name" style="width: 400px;">
                    <el-input v-model="form.name" maxlength="10"
                              show-word-limit></el-input>
                </el-form-item>
                <el-form-item label="æ‰‹æœºå·" prop="phone" style="width: 400px;">
                    <el-input v-model="form.phone" autocomplete="off"></el-input>
                </el-form-item>
                <el-form-item label="æ€§åˆ«" style="width: 400px;">
                    <el-radio-group v-model="form.sex">
                        <el-radio label="ç”·"></el-radio>
                        <el-radio label="å¥³"></el-radio>
                    </el-radio-group>
                </el-form-item>
                <el-form-item label="ç»„åˆ«" style="width: 400px;">
                    <el-radio-group v-model="form.groupzb" size="medium" style="width: 400px;">
                        <el-radio-button v-for="item in kmoptions"
                                         :key="item.value"
                                         :label="item.label"
                                         :value="item.value"></el-radio-button>
                    </el-radio-group>
                </el-form-item>
                <!--<el-form-item label="å¤‡æ³¨" style="width: 400px;">
                    <el-input type="textarea" v-model="form.bz"></el-input>
                </el-form-item>-->
                <el-form-item>
                    <el-button type="" @click="onSubmit" round>ç«‹å³æ³¨å†Œ</el-button>
                </el-form-item>
            </el-form>
        </div>
        <div v-for="(item,index) in baiduseace" style="text-align: left;">
             <div v-if="index <= '10'">
                 <span v-if="index=='0'">&nbsp;&nbsp;&nbsp;&nbsp;ğŸ”¥
            </span>
                <span v-if="index=='1'">
                &nbsp;&nbsp;<el-tag type="danger">{{index}}</el-tag>
            </span>
                <span v-if="index=='2'">
                &nbsp;&nbsp;<el-tag type="warning">{{index}}</el-tag>
            </span>
                <span v-if="index=='3'">
                &nbsp;&nbsp;<el-tag type="success">{{index}}</el-tag>
            </span>
                <span v-if="index!='3' & index!='2' & index!='1' & index!='0'">

                &nbsp;&nbsp;<el-tag type="info">{{index}}</el-tag>
            </span>
                <el-link :href="item.url" type="primary" :underline="false">{{item.word}}</el-link>
            </div>
        </div>
    </div>
</div>
</body>
<script src="/vue/jquery.min.js"></script>
<script src="/vue/vue.min.js"></script>
<script type="text/javascript">
    new Vue({
        el: '#app',
        data() {
        var regExp = new RegExp("^1[3578]\\d{9}$");
        var validatePhone = (rule, value, callback) => {
        if (value === '') {
          callback(new Error('è¯·è¾“å…¥æ‰‹æœºå·'));
        } else if (!regExp.test(value)) {
            callback(new Error('è¯·è¾“å…¥æ­£ç¡®å¯¹æ‰‹æœºå·'));
          } else {
          callback();
        }
      };
            return {
            baiduseace:[],
            kmoptions:[],//åŠ¨æ€ç»„åˆ« æ•°æ®æºæ˜¯æŸ¥è¯¢æ¥çš„
              form: {
                  name: '',
                  bz: '',
                  groupzb: '',
                  sex: '',
                  phone:''
                },
                rules: {
                      phone: [
                        { validator: validatePhone, trigger: 'blur' }
                      ]
                }
            };
        },
        //åˆå§‹åŒ–
        mounted: function () {
        this.kmList();
        this.hotSeach();
        },
        methods: {
        //ç™¾åº¦çƒ­æœ
        hotSeach () {
        var newthis = this;
        var url = '/reg/baidu';
            $.ajax({
                type: 'POST',
                url: url,
                dataType: 'json',
                success: function (result) {
                newthis.baiduseace=result.data;
                },
                error: function () {
                    console.log('error submit!!');
                    return false;
                }
            });

        },
        //é‡Œç¨‹åˆå§‹æŸ¥è¯¢
        kmList(){
        var newthis = this;
        var url = '/km/list';
            $.ajax({
                type: 'POST',
                url: url,
                dataType: 'json',
                success: function (result) {
                newthis.kmoptions=result;
                },
                error: function () {
                    console.log('error submit!!');
                    return false;
                }
            });

        },
        //æäº¤from è¿›è¡Œæ³¨å†Œ
        onSubmit() {
        //æ‹¿åˆ°fromiè¡¨å•æ•°æ® æƒ³åå°è¿›è¡Œæäº¤ ajax
          var addForm = this.form;
          var regExpPhone = new RegExp("^1[3578]\\d{9}$");
            var newthis = this;
            if (addForm.sex == '' ) {
            newthis.$message.error('æ€§åˆ«ä¸èƒ½ä¸ºç©º');
            return
            } else if (addForm.name == '') {
            newthis.$message.error('å§“åä¸èƒ½ä¸ºç©º');
            return
            } else if (addForm.phone == '') {
            newthis.$message.error('æ‰‹æœºå·ä¸èƒ½ä¸ºç©º');
            return
            }else if (addForm.groupzb == '') {
            newthis.$message.error('ç»„åˆ«ä¸èƒ½ä¸ºç©º');
            return
            }
            if(!regExpPhone.test(addForm.phone)) {
            newthis.$message.error('è¯·å¡«å†™æ­£ç¡®å¯¹æ‰‹æœºå·');
            return
            }
            var d = {
                'sex': addForm.sex,
                'bz': addForm.bz,
                'name': addForm.name,
                'groupzb': addForm.groupzb,
                'phone': addForm.phone,
            };
            var url = '/reg/reg';
            $.ajax({
                type: 'POST',
                url: url,
                data: d,
                dataType: 'json',
                success: function (result) {
                    if (result == 1) {
                        newthis.$message({
                            message: 'æ­å–œä½ ,æ³¨å†ŒæˆåŠŸ',
                            type: 'success'
                        });
                    } else {
                        newthis.$message.error('è¯¥æ‰‹æœºå·å·²è¢«æ³¨å†Œ');
                        }
                },
                error: function () {
                    console.log('error submit!!');
                    return false;
                }
            });
            console.log('submit!');
            }
        }
    })
</script>
<script src="/vue/element-ui.min.js"></script>
<!--<script src="/echarts.js"></script>-->
</html>